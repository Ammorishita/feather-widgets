!function(r){"use strict";function s(e,t){return this.ratingContainer=e,this.isAccessibilityImplemented=!1,this.settings={maxValue:5,value:0,step:1,readOnly:!1,template:"",selectedClass:"on",hoverClass:"hover"},t&&jQuery.extend(this.settings,t),this}s.prototype={getValue:function(){return this.settings.value},setValue:function(e){this.settings.value=e,this.elementsRenderer(this).reset()},getBaseElementMarkup:function(){var e=r(this.settings.template),t=this.ratingContainer.siblings("LEGEND").attr("id");return e&&e.length||(e=r('<div><span aria-hidden="true">&#9733;</span></div>')),!this.settings.readOnly&&this.isAccessibilityImplemented&&(e=r('<div><label><input required type="radio" name="sfRatingInput" aria-labelledby="'+t+'"><span aria-hidden="true">&#9733;</span></label></div>')),e.html()},isValidCssDefinition:function(e){return e.hasOwnProperty("from")&&e.hasOwnProperty("to")&&e.hasOwnProperty("css")},getCssClass:function(e,t){if(!r.isArray(t))return t;for(var s in t)if(this.isValidCssDefinition(t[s])&&t[s].from<e&&t[s].to>=e)return t[s].css},getSelectedCssClass:function(e){return this.getCssClass(e,this.settings.selectedClass)},getSelectedHoverClass:function(e){return this.getCssClass(e,this.settings.hoverClass)},elementsRenderer:function(a){function n(e){var t=a.ratingContainer.children();if(!r.isArray(e))return t.removeClass(e);for(var s in e)a.isValidCssDefinition(e[s])&&t.removeClass(e[s].css)}function i(e,t){var s=a.ratingContainer.children(),n=parseInt(e),i=e-n,r=n/a.settings.step;s.slice(0,r).addClass(a.getCssClass(1,t)),0!=i&&s.slice(r,e/a.settings.step).addClass(a.getCssClass(i,t))}return{fill:function(e){var t=a.getTargetedElement(e.target),s=a.ratingContainer.children().index(t)+1;i(s*a.settings.step,a.settings.selectedClass)},hover:function(e){n(a.settings.hoverClass);var t=a.getTargetedElement(e.target),s=a.ratingContainer.children().index(t)+1;i(s*a.settings.step,a.settings.hoverClass)},drainHover:function(){n(a.settings.hoverClass)},reset:function(){n(a.settings.selectedClass),n(a.settings.hoverClass),i(a.settings.value,a.settings.selectedClass)}}},selectElement:function(e){var t=this.ratingContainer.children(),s=this.getTargetedElement(e.target);this.settings.value=(t.index(s)+1)*this.settings.step,this.elementsRenderer(this).reset()},getTargetedElement:function(e){var t=e;return this.isAccessibilityImplemented&&(t=r(e).is("LABEL")?e:e.parentElement),t},attachEvents:function(){var e=this.ratingContainer.children();e.on("click",r.proxy(this.selectElement,this)),e.on("mouseover",this.elementsRenderer(this).hover),e.on("mouseout",this.elementsRenderer(this).drainHover),e.on("focus",this.elementsRenderer(this).hover),e.on("blur",this.elementsRenderer(this).reset),this.isAccessibilityImplemented&&(e.find("input").on("focus",this.elementsRenderer(this).hover),e.find("input").on("blur",this.elementsRenderer(this).reset))},render:function(){0<this.ratingContainer.siblings("LEGEND").length&&(this.isAccessibilityImplemented=!0),this.ratingContainer.empty();for(var e=this.getBaseElementMarkup(),t=0;t<this.settings.maxValue;t+=this.settings.step)this.ratingContainer.append(e);this.elementsRenderer(this).reset(),this.settings.readOnly||this.attachEvents()}},r.fn.extend({mvcRating:function(e){var t=new s(r(this),e);return t.render(),t}})}(jQuery);
//# sourceMappingURL=rating.min.js.map