@model Telerik.Sitefinity.Frontend.InlineClientAssets.Mvc.Models.JavaScript.JavaScriptViewModel

@using Telerik.Sitefinity.Frontend.InlineClientAssets.Mvc.Models;
@using Telerik.Sitefinity.Frontend.Mvc.Helpers;
@using Telerik.Sitefinity.Services;

@if (Model.Position == EmbedPosition.InPlace)
{
    @Html.Raw(Model.JavaScriptCode)
}

@if (SystemManager.IsDesignMode)
{   
    if (string.IsNullOrEmpty(Model.Description))
    {
        if (Model.Mode == ResourceMode.Inline && !string.IsNullOrEmpty(Model.JavaScriptCode))
        {
            var lines = Model.JavaScriptCode
                .Split(new string[1] { "\n" }, StringSplitOptions.RemoveEmptyEntries);

@*The identation in the <pre> tag is important.*@
<pre>
@string.Join("\n", lines.Take(2))
@if (lines.Length > 2)
{
@Html.Raw("...")
}
</pre>
        }
        else
        {
            <pre>@Model.JavaScriptCode</pre>
        }
        
        switch (Model.Position)
        {
            case EmbedPosition.Head:
                @Html.Resource("IncludedInTheHead")
                break;
            case EmbedPosition.InPlace:
                @Html.Resource("IncludedWhereDropped")
                break;
            case EmbedPosition.BeforeBodyEndTag:
                @Html.Resource("IncludedBeforeTheBodyEnd")
                break;
            default:
                break;
        }
    }
    else
    {
        @Model.Description
    }
}